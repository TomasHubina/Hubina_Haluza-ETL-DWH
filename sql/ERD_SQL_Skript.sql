-- ====================================================
-- DATABASE & SCHEMA CREATION
-- ====================================================
CREATE DATABASE IF NOT EXISTS WEATHER_SOURCE_LLC_FROSTBYTE;
USE WEATHER_SOURCE_LLC_FROSTBYTE;

-- ====================================================
-- TABLE: POSTAL_CODES (bez cudzích kľúčov - referenčná tabuľka)
-- ====================================================
CREATE TABLE IF NOT EXISTS POSTAL_CODES (
    POSTAL_CODE VARCHAR(20),
    CITY_NAME VARCHAR(65),
    COUNTRY CHAR(2)
);

-- ====================================================
-- TABLE: FORECAST_HISTORY_HOUR
-- ====================================================
CREATE TABLE IF NOT EXISTS FORECAST_HISTORY_HOUR (
    POSTAL_CODE VARCHAR(20),
    CITY_NAME VARCHAR(65),
    COUNTRY CHAR(2),
    TIME_INIT_UTC TIMESTAMP(6),
    TIME_VALID_UTC TIMESTAMP(6),
    DOY_UTC DECIMAL(4,0),
    HOUR_UTC DECIMAL(2,0),
    TIME_VALID_LCL TIMESTAMP(6),
    DST_OFFSET_MINUTES DECIMAL(4,0),
    TEMPERATURE_AIR_2M_F DECIMAL(38,1),
    TEMPERATURE_WETBULB_2M_F DECIMAL(38,1),
    TEMPERATURE_DEWPOINT_2M_F DECIMAL(38,1),
    TEMPERATURE_FEELSLIKE_2M_F DECIMAL(38,1),
    TEMPERATURE_WINDCHILL_2M_F DECIMAL(38,1),
    TEMPERATURE_HEATINDEX_2M_F DECIMAL(38,1),
    HUMIDITY_RELATIVE_2M_PCT DECIMAL(38,1),
    HUMIDITY_SPECIFIC_2M_GPKG DECIMAL(38,1),
    PRESSURE_2M_MB DECIMAL(38,1),
    PRESSURE_MEAN_SEA_LEVEL_MB DECIMAL(38,1),
    WIND_SPEED_10M_MPH DECIMAL(38,1),
    WIND_DIRECTION_10M_DEG DECIMAL(38,0),
    WIND_SPEED_80M_MPH DECIMAL(38,1),
    WIND_DIRECTION_80M_DEG DECIMAL(38,0),
    WIND_SPEED_100M_MPH DECIMAL(38,1),
    WIND_DIRECTION_100M_DEG DECIMAL(38,0),
    PRECIPITATION_IN DECIMAL(38,2),
    SNOWFALL_IN DECIMAL(38,2),
    CLOUD_COVER_PCT DECIMAL(38,0),
    RADIATION_SOLAR_TOTAL_WPM2 DECIMAL(38,1),
    PROBABILITY_OF_PRECIPITATION_PCT DECIMAL(38,0),
    PROBABILITY_OF_SNOW_PCT DECIMAL(38,0)
);

-- ====================================================
-- TABLE: HISTORY_HOUR
-- ====================================================
CREATE TABLE IF NOT EXISTS HISTORY_HOUR (
    POSTAL_CODE VARCHAR(20),
    CITY_NAME VARCHAR(65),
    COUNTRY CHAR(2),
    TIME_VALID_UTC TIMESTAMP(6) NOT NULL,
    DOY_UTC DECIMAL(4,0),
    HOUR_UTC DECIMAL(2,0),
    TIME_VALID_LCL TIMESTAMP(6),
    DST_OFFSET_MINUTES DECIMAL(4,0),
    TEMPERATURE_AIR_2M_F DECIMAL(38,1),
    TEMPERATURE_WETBULB_2M_F DECIMAL(38,1),
    TEMPERATURE_DEWPOINT_2M_F DECIMAL(38,1),
    TEMPERATURE_FEELSLIKE_2M_F DECIMAL(38,1),
    TEMPERATURE_WINDCHILL_2M_F DECIMAL(38,1),
    TEMPERATURE_HEATINDEX_2M_F DECIMAL(38,1),
    HUMIDITY_RELATIVE_2M_PCT DECIMAL(38,1),
    HUMIDITY_SPECIFIC_2M_GPKG DECIMAL(38,1),
    PRESSURE_2M_MB DECIMAL(38,1),
    PRESSURE_TENDENCY_2M_MB DECIMAL(38,1),
    PRESSURE_MEAN_SEA_LEVEL_MB DECIMAL(38,1),
    WIND_SPEED_10M_MPH DECIMAL(38,1),
    WIND_DIRECTION_10M_DEG DECIMAL(38,0),
    WIND_SPEED_80M_MPH DECIMAL(38,1),
    WIND_DIRECTION_80M_DEG DECIMAL(38,0),
    WIND_SPEED_100M_MPH DECIMAL(38,1),
    WIND_DIRECTION_100M_DEG DECIMAL(38,0),
    PRECIPITATION_IN DECIMAL(38,2),
    SNOWFALL_IN DECIMAL(38,2),
    CLOUD_COVER_PCT DECIMAL(38,0),
    RADIATION_SOLAR_TOTAL_WPM2 DECIMAL(38,1)
);

-- ====================================================
-- TABLE: FORECAST_HISTORY_DAY
-- ====================================================
CREATE TABLE IF NOT EXISTS FORECAST_HISTORY_DAY (
    POSTAL_CODE VARCHAR(20),
    CITY_NAME VARCHAR(65),
    COUNTRY CHAR(2),
    TIME_INIT_UTC TIMESTAMP(6) NOT NULL,
    DATE_VALID_STD DATE NOT NULL,
    DOY_STD DECIMAL(4,0),
    MIN_TEMPERATURE_AIR_2M_F DECIMAL(38,1),
    AVG_TEMPERATURE_AIR_2M_F DECIMAL(38,1),
    MAX_TEMPERATURE_AIR_2M_F DECIMAL(38,1),
    MIN_TEMPERATURE_WETBULB_2M_F DECIMAL(38,1),
    AVG_TEMPERATURE_WETBULB_2M_F DECIMAL(38,1),
    MAX_TEMPERATURE_WETBULB_2M_F DECIMAL(38,1),
    MIN_TEMPERATURE_DEWPOINT_2M_F DECIMAL(38,1),
    AVG_TEMPERATURE_DEWPOINT_2M_F DECIMAL(38,1),
    MAX_TEMPERATURE_DEWPOINT_2M_F DECIMAL(38,1),
    MIN_TEMPERATURE_FEELSLIKE_2M_F DECIMAL(38,1),
    AVG_TEMPERATURE_FEELSLIKE_2M_F DECIMAL(38,1),
    MAX_TEMPERATURE_FEELSLIKE_2M_F DECIMAL(38,1),
    MIN_TEMPERATURE_WINDCHILL_2M_F DECIMAL(38,1),
    AVG_TEMPERATURE_WINDCHILL_2M_F DECIMAL(38,1),
    MAX_TEMPERATURE_WINDCHILL_2M_F DECIMAL(38,1),
    MIN_TEMPERATURE_HEATINDEX_2M_F DECIMAL(38,1),
    AVG_TEMPERATURE_HEATINDEX_2M_F DECIMAL(38,1),
    MAX_TEMPERATURE_HEATINDEX_2M_F DECIMAL(38,1),
    MIN_HUMIDITY_RELATIVE_2M_PCT DECIMAL(38,1),
    AVG_HUMIDITY_RELATIVE_2M_PCT DECIMAL(38,1),
    MAX_HUMIDITY_RELATIVE_2M_PCT DECIMAL(38,1),
    MIN_HUMIDITY_SPECIFIC_2M_GPKG DECIMAL(38,1),
    AVG_HUMIDITY_SPECIFIC_2M_GPKG DECIMAL(38,1),
    MAX_HUMIDITY_SPECIFIC_2M_GPKG DECIMAL(38,1),
    MIN_PRESSURE_2M_MB DECIMAL(38,1),
    AVG_PRESSURE_2M_MB DECIMAL(38,1),
    MAX_PRESSURE_2M_MB DECIMAL(38,1),
    MIN_PRESSURE_MEAN_SEA_LEVEL_MB DECIMAL(38,1),
    AVG_PRESSURE_MEAN_SEA_LEVEL_MB DECIMAL(38,1),
    MAX_PRESSURE_MEAN_SEA_LEVEL_MB DECIMAL(38,1),
    MIN_WIND_SPEED_10M_MPH DECIMAL(38,1),
    AVG_WIND_SPEED_10M_MPH DECIMAL(38,1),
    MAX_WIND_SPEED_10M_MPH DECIMAL(38,1),
    AVG_WIND_DIRECTION_10M_DEG DECIMAL(38,0),
    MIN_WIND_SPEED_80M_MPH DECIMAL(38,1),
    AVG_WIND_SPEED_80M_MPH DECIMAL(38,1),
    MAX_WIND_SPEED_80M_MPH DECIMAL(38,1),
    AVG_WIND_DIRECTION_80M_DEG DECIMAL(38,0),
    MIN_WIND_SPEED_100M_MPH DECIMAL(38,1),
    AVG_WIND_SPEED_100M_MPH DECIMAL(38,1),
    MAX_WIND_SPEED_100M_MPH DECIMAL(38,1),
    AVG_WIND_DIRECTION_100M_DEG DECIMAL(38,0),
    TOT_PRECIPITATION_IN DECIMAL(38,2),
    TOT_SNOWFALL_IN DECIMAL(38,2),
    MIN_CLOUD_COVER_TOT_PCT DECIMAL(38,0),
    AVG_CLOUD_COVER_TOT_PCT DECIMAL(38,0),
    MAX_CLOUD_COVER_TOT_PCT DECIMAL(38,0),
    MIN_RADIATION_SOLAR_TOTAL_WPM2 DECIMAL(38,1),
    AVG_RADIATION_SOLAR_TOTAL_WPM2 DECIMAL(38,1),
    MAX_RADIATION_SOLAR_TOTAL_WPM2 DECIMAL(38,1),
    TOT_RADIATION_SOLAR_TOTAL_WPM2 DECIMAL(38,1),
    PROBABILITY_OF_PRECIPITATION_PCT DECIMAL(38,0),
    PROBABILITY_OF_SNOW_PCT DECIMAL(38,0)
);

-- ====================================================
-- TABLE: FORECAST_DAY
-- ====================================================
CREATE TABLE IF NOT EXISTS FORECAST_DAY (
    POSTAL_CODE VARCHAR(20),
    CITY_NAME VARCHAR(65),
    COUNTRY CHAR(2),
    TIME_INIT_UTC TIMESTAMP(6) NOT NULL,
    DATE_VALID_STD DATE NOT NULL,
    DOY_STD DECIMAL(4,0),
    MIN_TEMPERATURE_AIR_2M_F DECIMAL(38,1),
    AVG_TEMPERATURE_AIR_2M_F DECIMAL(38,1),
    MAX_TEMPERATURE_AIR_2M_F DECIMAL(38,1),
    MIN_TEMPERATURE_WETBULB_2M_F DECIMAL(38,1),
    AVG_TEMPERATURE_WETBULB_2M_F DECIMAL(38,1),
    MAX_TEMPERATURE_WETBULB_2M_F DECIMAL(38,1),
    MIN_TEMPERATURE_DEWPOINT_2M_F DECIMAL(38,1),
    AVG_TEMPERATURE_DEWPOINT_2M_F DECIMAL(38,1),
    MAX_TEMPERATURE_DEWPOINT_2M_F DECIMAL(38,1),
    MIN_TEMPERATURE_FEELSLIKE_2M_F DECIMAL(38,1),
    AVG_TEMPERATURE_FEELSLIKE_2M_F DECIMAL(38,1),
    MAX_TEMPERATURE_FEELSLIKE_2M_F DECIMAL(38,1),
    MIN_TEMPERATURE_WINDCHILL_2M_F DECIMAL(38,1),
    AVG_TEMPERATURE_WINDCHILL_2M_F DECIMAL(38,1),
    MAX_TEMPERATURE_WINDCHILL_2M_F DECIMAL(38,1),
    MIN_TEMPERATURE_HEATINDEX_2M_F DECIMAL(38,1),
    AVG_TEMPERATURE_HEATINDEX_2M_F DECIMAL(38,1),
    MAX_TEMPERATURE_HEATINDEX_2M_F DECIMAL(38,1),
    MIN_HUMIDITY_RELATIVE_2M_PCT DECIMAL(38,1),
    AVG_HUMIDITY_RELATIVE_2M_PCT DECIMAL(38,1),
    MAX_HUMIDITY_RELATIVE_2M_PCT DECIMAL(38,1),
    MIN_HUMIDITY_SPECIFIC_2M_GPKG DECIMAL(38,1),
    AVG_HUMIDITY_SPECIFIC_2M_GPKG DECIMAL(38,1),
    MAX_HUMIDITY_SPECIFIC_2M_GPKG DECIMAL(38,1),
    MIN_PRESSURE_2M_MB DECIMAL(38,1),
    AVG_PRESSURE_2M_MB DECIMAL(38,1),
    MAX_PRESSURE_2M_MB DECIMAL(38,1),
    MIN_PRESSURE_MEAN_SEA_LEVEL_MB DECIMAL(38,1),
    AVG_PRESSURE_MEAN_SEA_LEVEL_MB DECIMAL(38,1),
    MAX_PRESSURE_MEAN_SEA_LEVEL_MB DECIMAL(38,1),
    MIN_WIND_SPEED_10M_MPH DECIMAL(38,1),
    AVG_WIND_SPEED_10M_MPH DECIMAL(38,1),
    MAX_WIND_SPEED_10M_MPH DECIMAL(38,1),
    AVG_WIND_DIRECTION_10M_DEG DECIMAL(38,0),
    MIN_WIND_SPEED_80M_MPH DECIMAL(38,1),
    AVG_WIND_SPEED_80M_MPH DECIMAL(38,1),
    MAX_WIND_SPEED_80M_MPH DECIMAL(38,1),
    AVG_WIND_DIRECTION_80M_DEG DECIMAL(38,0),
    MIN_WIND_SPEED_100M_MPH DECIMAL(38,1),
    AVG_WIND_SPEED_100M_MPH DECIMAL(38,1),
    MAX_WIND_SPEED_100M_MPH DECIMAL(38,1),
    AVG_WIND_DIRECTION_100M_DEG DECIMAL(38,0),
    TOT_PRECIPITATION_IN DECIMAL(38,2),
    TOT_SNOWFALL_IN DECIMAL(38,2),
    MIN_CLOUD_COVER_TOT_PCT DECIMAL(38,0),
    AVG_CLOUD_COVER_TOT_PCT DECIMAL(38,0),
    MAX_CLOUD_COVER_TOT_PCT DECIMAL(38,0),
    MIN_RADIATION_SOLAR_TOTAL_WPM2 DECIMAL(38,1),
    AVG_RADIATION_SOLAR_TOTAL_WPM2 DECIMAL(38,1),
    MAX_RADIATION_SOLAR_TOTAL_WPM2 DECIMAL(38,1),
    TOT_RADIATION_SOLAR_TOTAL_WPM2 DECIMAL(38,1),
    PROBABILITY_OF_PRECIPITATION_PCT DECIMAL(38,0),
    PROBABILITY_OF_SNOW_PCT DECIMAL(38,0)
);

-- ====================================================
-- TABLE: HISTORY_DAY
-- ====================================================
CREATE TABLE IF NOT EXISTS HISTORY_DAY (
    POSTAL_CODE VARCHAR(20),
    CITY_NAME VARCHAR(65),
    COUNTRY CHAR(2),
    DATE_VALID_STD DATE,
    DOY_STD DECIMAL(4,0),
    MIN_TEMPERATURE_AIR_2M_F DECIMAL(38,1),
    AVG_TEMPERATURE_AIR_2M_F DECIMAL(38,1),
    MAX_TEMPERATURE_AIR_2M_F DECIMAL(38,1),
    MIN_TEMPERATURE_WETBULB_2M_F DECIMAL(38,1),
    AVG_TEMPERATURE_WETBULB_2M_F DECIMAL(38,1),
    MAX_TEMPERATURE_WETBULB_2M_F DECIMAL(38,1),
    MIN_TEMPERATURE_DEWPOINT_2M_F DECIMAL(38,1),
    AVG_TEMPERATURE_DEWPOINT_2M_F DECIMAL(38,1),
    MAX_TEMPERATURE_DEWPOINT_2M_F DECIMAL(38,1),
    MIN_TEMPERATURE_FEELSLIKE_2M_F DECIMAL(38,1),
    AVG_TEMPERATURE_FEELSLIKE_2M_F DECIMAL(38,1),
    MAX_TEMPERATURE_FEELSLIKE_2M_F DECIMAL(38,1),
    MIN_TEMPERATURE_WINDCHILL_2M_F DECIMAL(38,1),
    AVG_TEMPERATURE_WINDCHILL_2M_F DECIMAL(38,1),
    MAX_TEMPERATURE_WINDCHILL_2M_F DECIMAL(38,1),
    MIN_TEMPERATURE_HEATINDEX_2M_F DECIMAL(38,1),
    AVG_TEMPERATURE_HEATINDEX_2M_F DECIMAL(38,1),
    MAX_TEMPERATURE_HEATINDEX_2M_F DECIMAL(38,1),
    MIN_HUMIDITY_RELATIVE_2M_PCT DECIMAL(38,1),
    AVG_HUMIDITY_RELATIVE_2M_PCT DECIMAL(38,1),
    MAX_HUMIDITY_RELATIVE_2M_PCT DECIMAL(38,1),
    MIN_HUMIDITY_SPECIFIC_2M_GPKG DECIMAL(38,1),
    AVG_HUMIDITY_SPECIFIC_2M_GPKG DECIMAL(38,1),
    MAX_HUMIDITY_SPECIFIC_2M_GPKG DECIMAL(38,1),
    MIN_PRESSURE_2M_MB DECIMAL(38,1),
    AVG_PRESSURE_2M_MB DECIMAL(38,1),
    MAX_PRESSURE_2M_MB DECIMAL(38,1),
    MIN_PRESSURE_TENDENCY_2M_MB DECIMAL(38,1),
    AVG_PRESSURE_TENDENCY_2M_MB DECIMAL(38,1),
    MAX_PRESSURE_TENDENCY_2M_MB DECIMAL(38,1),
    MIN_PRESSURE_MEAN_SEA_LEVEL_MB DECIMAL(38,1),
    AVG_PRESSURE_MEAN_SEA_LEVEL_MB DECIMAL(38,1),
    MAX_PRESSURE_MEAN_SEA_LEVEL_MB DECIMAL(38,1),
    MIN_WIND_SPEED_10M_MPH DECIMAL(38,1),
    AVG_WIND_SPEED_10M_MPH DECIMAL(38,1),
    MAX_WIND_SPEED_10M_MPH DECIMAL(38,1),
    AVG_WIND_DIRECTION_10M_DEG DECIMAL(38,0),
    MIN_WIND_SPEED_80M_MPH DECIMAL(38,1),
    AVG_WIND_SPEED_80M_MPH DECIMAL(38,1),
    MAX_WIND_SPEED_80M_MPH DECIMAL(38,1),
    AVG_WIND_DIRECTION_80M_DEG DECIMAL(38,0),
    MIN_WIND_SPEED_100M_MPH DECIMAL(38,1),
    AVG_WIND_SPEED_100M_MPH DECIMAL(38,1),
    MAX_WIND_SPEED_100M_MPH DECIMAL(38,1),
    AVG_WIND_DIRECTION_100M_DEG DECIMAL(38,0),
    TOT_PRECIPITATION_IN DECIMAL(38,2),
    TOT_SNOWFALL_IN DECIMAL(38,2),
    TOT_SNOWDEPTH_IN DECIMAL(38,1),
    MIN_CLOUD_COVER_TOT_PCT DECIMAL(38,0),
    AVG_CLOUD_COVER_TOT_PCT DECIMAL(38,0),
    MAX_CLOUD_COVER_TOT_PCT DECIMAL(38,0),
    MIN_RADIATION_SOLAR_TOTAL_WPM2 DECIMAL(38,1),
    AVG_RADIATION_SOLAR_TOTAL_WPM2 DECIMAL(38,1),
    MAX_RADIATION_SOLAR_TOTAL_WPM2 DECIMAL(38,1),
    TOT_RADIATION_SOLAR_TOTAL_WPM2 DECIMAL(38,1)
);

-- ====================================================
-- TABLE: FORECAST_HOUR
-- ====================================================
CREATE TABLE IF NOT EXISTS FORECAST_HOUR (
    POSTAL_CODE VARCHAR(20),
    CITY_NAME VARCHAR(65),
    COUNTRY CHAR(2),
    TIME_INIT_UTC TIMESTAMP(6) NOT NULL,
    TIME_VALID_UTC TIMESTAMP(6) NOT NULL,
    DOY_UTC DECIMAL(4,0),
    HOUR_UTC DECIMAL(2,0),
    TIME_VALID_LCL TIMESTAMP(6),
    DST_OFFSET_MINUTES DECIMAL(4,0),
    TEMPERATURE_AIR_2M_F DECIMAL(38,1),
    TEMPERATURE_WETBULB_2M_F DECIMAL(38,1),
    TEMPERATURE_DEWPOINT_2M_F DECIMAL(38,1),
    TEMPERATURE_FEELSLIKE_2M_F DECIMAL(38,1),
    TEMPERATURE_WINDCHILL_2M_F DECIMAL(38,1),
    TEMPERATURE_HEATINDEX_2M_F DECIMAL(38,1),
    HUMIDITY_RELATIVE_2M_PCT DECIMAL(38,1),
    HUMIDITY_SPECIFIC_2M_GPKG DECIMAL(38,1),
    PRESSURE_2M_MB DECIMAL(38,1),
    PRESSURE_MEAN_SEA_LEVEL_MB DECIMAL(38,1),
    WIND_SPEED_10M_MPH DECIMAL(38,1),
    WIND_DIRECTION_10M_DEG DECIMAL(38,0),
    WIND_SPEED_80M_MPH DECIMAL(38,1),
    WIND_DIRECTION_80M_DEG DECIMAL(38,0),
    WIND_SPEED_100M_MPH DECIMAL(38,1),
    WIND_DIRECTION_100M_DEG DECIMAL(38,0),
    PRECIPITATION_IN DECIMAL(38,2),
    SNOWFALL_IN DECIMAL(38,2),
    CLOUD_COVER_PCT DECIMAL(38,0),
    RADIATION_SOLAR_TOTAL_WPM2 DECIMAL(38,1),
    PROBABILITY_OF_PRECIPITATION_PCT DECIMAL(38,0),
    PROBABILITY_OF_SNOW_PCT DECIMAL(38,0)
);